From b95e1662facf7b4bf4b80730b9c5bdbda85df6b0 Mon Sep 17 00:00:00 2001
From: Lawrence-Tang <tangzongsheng@gmail.com>
Date: Sat, 22 Feb 2020 14:10:37 +0800
Subject: [PATCH 19/55] rk3328: optimized network performance, adjusted CPU to
 performance priority

---
 .../linux/rockchip-rk3328/base-files/etc/init.d/fa-rk3328-misc   | 9 +++++++++
 .../linux/rockchip-rk3328/base-files/etc/rc.d/S96fa-rk3328-misc  | 1 +
 2 files changed, 10 insertions(+)
 create mode 100755 target/linux/rockchip-rk3328/base-files/etc/init.d/fa-rk3328-misc
 create mode 120000 target/linux/rockchip-rk3328/base-files/etc/rc.d/S96fa-rk3328-misc

diff --git a/target/linux/rockchip-rk3328/base-files/etc/init.d/fa-rk3328-misc b/target/linux/rockchip-rk3328/base-files/etc/init.d/fa-rk3328-misc
new file mode 100755
index 0000000000..0a52db347a
--- /dev/null
+++ b/target/linux/rockchip-rk3328/base-files/etc/init.d/fa-rk3328-misc
@@ -0,0 +1,9 @@
+#!/bin/sh /etc/rc.common
+
+START=96
+ 
+start() {
+    [ -f /proc/irq/28/smp_affinity ] && echo 8 > /proc/irq/28/smp_affinity
+    echo performance > /sys/devices/system/cpu/cpufreq/policy0/scaling_governor
+}
+
diff --git a/target/linux/rockchip-rk3328/base-files/etc/rc.d/S96fa-rk3328-misc b/target/linux/rockchip-rk3328/base-files/etc/rc.d/S96fa-rk3328-misc
new file mode 120000
index 0000000000..dbf8b5733f
--- /dev/null
+++ b/target/linux/rockchip-rk3328/base-files/etc/rc.d/S96fa-rk3328-misc
@@ -0,0 +1 @@
+../init.d/fa-rk3328-misc
\ No newline at end of file
-- 
2.14.1.windows.1

